## 1ï¸âƒ£ index ê¸°ë³¸ ì„¤ì • (í´ëŸ¬ìŠ¤í„°/ì„±ëŠ¥ ê´€ì )

```json
"number_of_shards": 1
```

* ì¸ë±ìŠ¤ë¥¼ **1ê°œ ìƒ¤ë“œ**ë¡œ êµ¬ì„±
* ë‹¨ì¼ ë…¸ë“œ ë˜ëŠ” ì†Œê·œëª¨ íŠ¸ë˜í”½ ì „ì œ
* ê²€ìƒ‰ ì •í™•ë„ ì‹¤í—˜, ê°œë°œ/ìŠ¤í…Œì´ì§•ì— ì í•©

```json
"number_of_replicas": 0
```

* ë³µì œë³¸ ì—†ìŒ
* ì¥ì•  ë‚´êµ¬ì„±ë³´ë‹¤ **ì“°ê¸°/ê²€ìƒ‰ ì„±ëŠ¥ê³¼ ë‹¨ìˆœì„±** ìš°ì„ 

```json
"refresh_interval": "1s"
```

* 1ì´ˆë§ˆë‹¤ ê²€ìƒ‰ ê°€ëŠ¥ ìƒíƒœë¡œ ë°˜ì˜
* ê²€ìƒ‰ ë°˜ì˜ ì§€ì—° ìµœì†Œí™” (Near Real-Time)

```json
"max_ngram_diff": 20
```

* edge_ngram ì‚¬ìš© ì‹œ
* `min_gram`ê³¼ `max_gram` ì°¨ì´ë¥¼ í—ˆìš©í•˜ê¸° ìœ„í•œ í•„ìˆ˜ ì˜µì…˜
* autocomplete ìš© ì„¤ì •

---

## 2ï¸âƒ£ analysis ì˜ì—­ â€“ ê²€ìƒ‰ í’ˆì§ˆì˜ í•µì‹¬

### 2-1. tokenizer (í˜•íƒœì†Œ ë¶„í•´ ê·œì¹™)

```json
"nori_tokenizer_user": {
  "type": "nori_tokenizer",
  "decompound_mode": "mixed",
  "user_dictionary": "analysis/userdict_ko.txt"
}
```

#### ë‹¨ì–´ ì„¤ëª…

| í•­ëª©                       | ì˜ë¯¸                               |
| ------------------------ | -------------------------------- |
| `nori_tokenizer`         | Elasticsearch ê³µì‹ **í•œêµ­ì–´ í˜•íƒœì†Œ ë¶„ì„ê¸°** |
| `decompound_mode: mixed` | ë³µí•©ì–´ë¥¼ **ì›í˜• + ë¶„í•´ í˜•íƒœ ëª¨ë‘ ìœ ì§€**        |
| `user_dictionary`        | ì‚¬ìš©ì ì •ì˜ ë‹¨ì–´ ì‚¬ì „                     |

#### íš¨ê³¼

* â€œë°ì´í„°í—ˆë¸Œâ€ â†’ `ë°ì´í„°í—ˆë¸Œ`, `ë°ì´í„°`, `í—ˆë¸Œ`
* ë„ë©”ì¸ ìš©ì–´(ì˜í•™, IT, ê³ ìœ ëª…ì‚¬) **ë¶„í•´ ì˜¤ë¥˜ ë°©ì§€**

---

### 2-2. filter (í† í° í›„ì²˜ë¦¬)

#### ğŸ”¹ ë™ì˜ì–´ ê·¸ë˜í”„

```json
"ko_synonyms": {
  "type": "synonym_graph",
  "synonyms_path": "analysis/synonyms_ko.txt",
  "updateable": true
}
```

##### ì˜ë¯¸

* â€œAI, ì¸ê³µì§€ëŠ¥â€, â€œì•”, ì•…ì„±ì¢…ì–‘â€ ê°™ì€ **ê²€ìƒ‰ í™•ì¥**
* `synonym_graph` â†’ ê²€ìƒ‰ ì‹œ phrase ì •í™•ë„ ìœ ì§€
* `updateable: true` â†’ **ì¸ë±ìŠ¤ ì¬ìƒì„± ì—†ì´** ë™ì˜ì–´ ê°±ì‹  ê°€ëŠ¥

---

#### ğŸ”¹ ìë™ì™„ì„±ìš© edge n-gram

```json
"edge_ngram_filter": {
  "type": "edge_ngram",
  "min_gram": 1,
  "max_gram": 20
}
```

##### ì˜ë¯¸

* â€œë°â€ â†’ â€œë°ì´â€ â†’ â€œë°ì´í„°â€ ì‹ì˜ **ì•ë¶€ë¶„ ìë™ì™„ì„±**
* ê²€ìƒ‰ì–´ íƒ€ì´í•‘ ë‹¨ê³„ë³„ ë§¤ì¹­

---

## 3ï¸âƒ£ analyzer â€“ â€œì–¸ì œ ì–´ë–»ê²Œ ë¶„ì„í•  ê²ƒì¸ê°€â€

### 3-1. ê²€ìƒ‰ìš© ë¶„ì„ê¸° (í™•ì¥ ì¤‘ì‹¬)

```json
"ko_search": {
  "tokenizer": "nori_tokenizer_user",
  "filter": ["lowercase", "ko_synonyms"]
}
```

#### ì˜ë„

* **ê²€ìƒ‰ ì‹œì—ë§Œ ë™ì˜ì–´ ì ìš©**
* ë¶ˆí•„ìš”í•œ ì¸ë±ìŠ¤ íŒ½ì°½ ë°©ì§€
* ê²€ìƒ‰ ìœ ì—°ì„± ê·¹ëŒ€í™”

---

### 3-2. ì¸ë±ì‹±ìš© ë¶„ì„ê¸° (ì •í™•ì„± ì¤‘ì‹¬)

```json
"ko_index": {
  "tokenizer": "nori_tokenizer_user",
  "filter": ["lowercase"]
}
```

#### ì˜ë„

* ì €ì¥ ì‹œì—ëŠ” **ì›ë¬¸ ì¤‘ì‹¬**
* ë™ì˜ì–´ëŠ” ê²€ìƒ‰ ë‹¨ê³„ì—ì„œë§Œ í™•ì¥

â¡ï¸ **Index-time vs Search-time ë¶„ì„ ë¶„ë¦¬**
â¡ï¸ ê²€ìƒ‰ í’ˆì§ˆ ì„¤ê³„ì˜ í•µì‹¬ í¬ì¸íŠ¸

---

### 3-3. ìë™ì™„ì„± ë¶„ì„ê¸°

```json
"autocomplete_index"
"autocomplete_search"
```

| êµ¬ë¶„        | ì¸ë±ìŠ¤                    | ê²€ìƒ‰        |
| --------- | ---------------------- | --------- |
| tokenizer | standard               | standard  |
| filter    | lowercase + edge_ngram | lowercase |

#### ì´ìœ 

* ì €ì¥ ì‹œë§Œ n-gram ë¶„í•´
* ê²€ìƒ‰ ì‹œëŠ” **ì›ë¬¸ ê·¸ëŒ€ë¡œ**
* ë¶ˆí•„ìš”í•œ í† í° í­ì¦ ë°©ì§€

---

## 4ï¸âƒ£ mappings â€“ ë°ì´í„° êµ¬ì¡°ì™€ ê²€ìƒ‰ ì „ëµ

```json
"dynamic": "strict"
```

### ì˜ë¯¸

* ì •ì˜ë˜ì§€ ì•Šì€ í•„ë“œê°€ ë“¤ì–´ì˜¤ë©´ **ì—ëŸ¬**
* ìŠ¤í‚¤ë§ˆ ì•ˆì •ì„± í™•ë³´
* ì‹¤ë¬´/ëŒ€ê¸°ì—…ì—ì„œ ë§¤ìš° ì„ í˜¸

---

### ì£¼ìš” í•„ë“œ ì„¤ëª…

#### ğŸ”¹ id

```json
"type": "keyword"
```

* ì •í™• ì¼ì¹˜
* ì •ë ¬, ì§‘ê³„, ì¡°íšŒìš©

---

#### ğŸ”¹ title / summary / body

```json
"type": "text",
"analyzer": "ko_index",
"search_analyzer": "ko_search"
```

##### ì˜ë¯¸

* ì¸ë±ì‹±: í˜•íƒœì†Œ ë¶„ì„ + ì›ë¬¸ ìœ ì§€
* ê²€ìƒ‰: ë™ì˜ì–´ í¬í•¨ í™•ì¥ ê²€ìƒ‰

```json
"fields": {
  "keyword": { "type": "keyword" }
}
```

* ì •ë ¬/ì§‘ê³„/ì¤‘ë³µ ì œê±°ìš© ì„œë¸Œ í•„ë“œ

---

#### ğŸ”¹ tags / category / author

```json
"type": "keyword"
```

* ì •í™• ë§¤ì¹­
* í•„í„°ë§ / aggregation ìš©ë„

---

#### ğŸ”¹ publishedAt

```json
"type": "date"
```

* ê¸°ê°„ ê²€ìƒ‰
* ìµœì‹ ìˆœ ì •ë ¬

---

#### ğŸ”¹ popularityScore

```json
"type": "rank_feature"
```

##### ì˜ë¯¸

* í´ë¦­ ìˆ˜, ì¡°íšŒ ìˆ˜ ë“± **ë­í‚¹ ê°€ì¤‘ì¹˜**
* BM25 ì ìˆ˜ì— **ê°€ë³ê²Œ ê°€ì¤‘ì¹˜ ë°˜ì˜**
* script_scoreë³´ë‹¤ í›¨ì”¬ íš¨ìœ¨ì 

---

#### ğŸ”¹ titleAutocomplete

```json
"type": "text",
"analyzer": "autocomplete_index",
"search_analyzer": "autocomplete_search"
```

* ìë™ì™„ì„± ì „ìš© í•„ë“œ
* ë³¸ë¬¸ ê²€ìƒ‰ê³¼ **ì™„ì „íˆ ë¶„ë¦¬**
